# Режимы установки

> ![](./public_sys-resources/icon-notice.gif) ПРИМЕЧАНИЕ:
> 
> - Поддерживаются только серверы TaiShan 200 и FusionServer Pro. Более подробную информацию о поддерживаемых моделях серверов см. в разделе [Совместимость аппаратных средств](./installation-preparations.html#hardware-compatibility). Поддерживаются только платформа виртуализации, сформированная на базе компонентов виртуализации openEuler (операционная система хоста openEuler и QEMU, а также KVM, предоставляемые в пакете с релизом), и платформа виртуализации x86 публичного облака Huawei.
> - В настоящее время поддерживаются только установка через CD-ROM, флеш-накопитель USB, сеть, образ QCOW2 и частный образ. При этом только платформа виртуализации x86 публичного облака Huawei поддерживает режим установки частного образа.

\[\[toc]]

## Установка через CD/DVD-ROM

В этом разделе описывается процедура установки openEuler методом создания или использования диска CD/DVD-ROM.

### Подготовка источника установки

Если диск CD/DVD-ROM получен, установите с его помощью операционную систему. Если получен файл ISO, запишите этот файл на DVD и установите операционную систему с помощью данного DVD.

### Начало установки

Выполните следующие операции для запуска установки:

> ![](./public_sys-resources/icon-note.gif) ПРИМЕЧАНИЕ:  
Настройте приоритетную загрузку системы с диска CD/DVD-ROM. Например, в случае с BIOS переместите опцию **CD/DVD-ROM Drive,** расположенную под **Boot Type Order,** вверх.

1. Отсоедините все ненужные диски, например USB-накопители.
2. Запустите компьютер.
3. Вставьте установочный диск CD/DVD-ROM в дисковод CD/DVD-ROM.
4. Перезапустите компьютер.

Через некоторое время на экране появится страница мастера установки графического интерфейса, которая содержит различные параметры загрузки. Если в течение одной минуты не будет выполнено ни одной операции, установка начнется автоматически с параметрами, заданными по умолчанию.

## Установка через флеш-накопитель USB

В этом разделе описывается процедура установки openEuler методом создания или использования флеш-накопителя USB.

### Подготовка источника установки

Обратите внимание на емкость флеш-накопителя USB. Флеш-накопитель USB должен иметь достаточно места для хранения полного образа. Рекомендуется использовать флеш-накопитель USB емкостью более 16 ГБ.

1. Вставьте флеш-накопитель USB в разъем компьютера и выполните команду **dmesg**, чтобы просмотреть соответствующий журнал. В конце журнала размещается информация, сгенерированная только что подключенным флеш-накопителем USB. Информация аналогична следующей:
   
   ```
   [ 170.171135] sd 5:0:0:0: [sdb] Attached SCSI removable disk
   ```
   
   > ![](./public_sys-resources/icon-note.gif) ПРИМЕЧАНИЕ:  
Процедура здесь приведена на примере флеш-накопителя USB **sdb.**

2. Переключитесь на пользователя **root**. При выполнении команды **su** необходимо ввести пароль.
   
   ```
   $ su - root
   ```

3. Убедитесь, что флеш-накопитель USB не смонтирован. Выполните следующую команду:
   
   ```
   # findmnt /dev/sdb
   ```
   
   - Если командный вывод отсутствует, файловая система не смонтирована. Перейдите к следующему шагу.
   
   - Если отображается следующая информация, значит, флеш-накопитель USB автоматически смонтирован.
     
     ```
     # findmnt /dev/sdb
     TARGET   SOURCE   FSTYPE  OPTIONS
     /mnt/iso /dev/sdb iso9660 ro,relatime
     ```
     
     В этом случае необходимо выполнить команду **umount**, чтобы удалить устройство.
     
     ```
     # umount /mnt/iso
     ```

4. Выполните команду **dd** для записи образа ISO на флеш-накопитель USB.
   
   ```
   # dd if=/path/to/image.iso of=/dev/device bs=blocksize
   ```
   
   Укажите вместо **/path/to/image.iso** полный путь загруженного файла с образом ISO, вместо **device** — имя устройства, введенное в команде **dmesg**, и установите корректный размер блока (например, 512 КБ) в качестве параметра **blocksize**, чтобы ускорить процесс записи.
   
   Например, если именем файла с образом ISO является **/home/testuser/Downloads/openEuler-20.09-aarch64-dvd.iso**, а обнаруженным именем устройства — **sdb**, выполните следующую команду:
   
   ```
   # dd if=/home/testuser/Downloads/openEuler-20.09-aarch64-dvd.iso of=/dev/sdb bs=512k
   ```

5. Записав образ, извлеките флеш-накопитель USB.
   
   Во время записи образа строка с ходом процесса не отображается. Когда снова появится знак номера (#), запись считается завершенной. Выйдите из учетной записи **root** и извлеките флеш-накопитель USB. В этом случае флеш-накопитель USB можно использовать в качестве источника установки системы.

### Начало установки

Выполните следующие операции для запуска установки:

> ![](./public_sys-resources/icon-note.gif) ПРИМЕЧАНИЕ:  
Настройте приоритетную загрузку системы с флеш-накопителя USB. Например, в случае с BIOS переместите опцию **USB,** расположенную под **Boot Type Order,** вверх.

1. Отсоедините все ненужные диски.
2. Откройте компьютерную систему.
3. Вставьте флеш-накопитель USB в разъем компьютера.
4. Перезапустите компьютер.

Через некоторое время на экране появится страница мастера установки графического интерфейса, которая содержит различные параметры загрузки. Если в течение одной минуты не будет выполнено ни одной операции, установочная программа автоматически начнет установку.

## Установка через сеть с использованием PXE

Для загрузки с PXE необходимо правильно сконфигурировать сервер и сетевой интерфейс вашего компьютера для поддержки PXE.

Если на целевом оборудовании установлена сетевая карта NIC с поддержкой PXE, можно настроить загрузку компьютера приоритетно с файлов сетевой системы, а не локальных носителей (например, дисков CD-ROM) и запустить программу установки Anaconda.

Для установки через сеть с использованием PXE клиент отправляет широковещательный запрос информации DHCP и IP-адреса в сеть, используя карту NIC с поддержкой PXE. DHCP-сервер предоставляет клиенту IP-адрес и другую сетевую информацию, например IP-адрес или имя хоста DNS и сервера FTP (который предоставляет файлы, необходимые для запуска программы установки) и место хранения файлов на сервере.

> ![](./public_sys-resources/icon-note.gif) ПРИМЕЧАНИЕ:  
Конфигурации серверов TFTP, DHCP и HTTP здесь не приводятся. Для получения более подробной информации см. [Инструкции по установке в полностью автоматическом режиме](./using-kickstart-for-automatic-installation.html#full-automatic-installation-guide).

## Установка через образ QCOW2

В этом разделе описывается процедура установки openEuler методом создания или использования образа QCOW2.

### Создание образа QCOW2

1. Установите программный пакет **qemu-img**.
   
   ```
   # dnf install -y qemu-img
   ```

2. Выполните команду **create**, чтобы создать файл образа. Формат команды выглядит следующим образом:
   
   ```
   $ qemu-img create -f <imgFormat> -o <fileOption> <fileName> <diskSize>
   ```
   
   Описание параметров:
   
   - _imgFormat_: формат образа. Принимаемые значения — **raw** или **qcow2**.
   - _fileOption_: это необязательный параметр, который задает свойства файла образа, например, это может быть файл образа постпроцессорного компонента, файл со свойством сжатия или шифрования.
   - _fileName_: имя файла.
   - _diskSize_: размер диска блочного хранения. Единицы измерения — K, M, G и T, что означает КиБ, МиБ, ГиБ и ТиБ соответственно.
   
   Например, для создания файла образа **openEuler-imge.qcow2**, размер диска которого составляет 32 ГБ, а формат образа — qcow2, команда и результат ее выполнения будут следующими:
   
   ```
   $ qemu-img create -f qcow2 openEuler-image.qcow2 32G
   Formatting 'openEuler-image.qcow2', fmt=qcow2 size=34359738368 cluster_size=65536 lazy_refcounts=off refcount_bits=16
   ```

### Начало установки

Выполните следующие операции для запуска установки:

1. Подготовьте файл с образом QCOW2.
2. Подготовьте сеть виртуальной машины.
3. Подготовьте набор загрузочных UEFI-инструментов — EDK II.
4. Подготовьте конфигурационные XML-файлы виртуальной машины.
5. Создайте виртуальную машину.
6. Запустите виртуальную машину.

Для получения более подробной информации см. *[Руководство пользователя платформы виртуализации openEuler 20.09](./../Virtualization/virtualization.html)*.

## Установка через частный образ

В этом разделе описывается процедура установки openEuler методом создания или использования частного образа.

### Создание частного образа

Инструкции по созданию частного образа приведены в документе [*Руководство пользователя службы управления образами*](https://support.huaweicloud.com/intl/en-us/usermanual-ims/en-us_topic_0013901628.html).

### Начало установки

Более подробная информация о запуске платформы виртуализации x86 публичного облака Huawei приведена а документе [*Руководство пользователя эластичного облачного сервера*](https://support.huaweicloud.com/intl/en-us/wtsnew-ims/index.html).