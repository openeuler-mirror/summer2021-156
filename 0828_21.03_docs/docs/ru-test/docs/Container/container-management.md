# Управление контейнерами

- [Управление контейнерами](#container-management)
  - [Создание контейнера](#creating-a-container)
  - [Запуск контейнера](#starting-a-container)
  - [Создание и запуск контейнера](#running-a-container)
  - [Остановка контейнера](#stopping-a-container)
  - [Принудительная остановка контейнера](#forcibly-stopping-a-container)
  - [Удаление контейнера](#removing-a-container)
  - [Подключение к контейнеру](#attaching-to-a-container)
  - [Переименование контейнера](#renaming-a-container)
  - [Выполнение команды в работающем контейнере](#executing-a-command-in-a-running-container)
  - [Запрос информации об одном контейнере](#querying-information-about-a-single-container)
  - [Запрос информации обо всех контейнерах](#querying-information-about-all-containers)
  - [Перезапуск контейнера](#restarting-a-container)
  - [Ожидание завершения работы контейнера](#waiting-for-a-container-to-exit)
  - [Просмотр информации о процессах в контейнере](#viewing-process-information-in-a-container)
  - [Отображение статистики использования ресурсов контейнера](#displaying-resource-usage-statistics-of-a-container)
  - [Получение журналов контейнера](#obtaining-container-logs)
  - [Копирование данных между контейнером и хостом](#copying-data-between-a-container-and-a-host)
  - [Постановка контейнера на паузу](#pausing-a-container)
  - [Возобновление работы контейнера](#resuming-a-container)
  - [Получение сообщений о событиях от сервера в реальном времени](#obtaining-event-messages-from-the-server-in-real-time)

## Создание контейнера

### Описание

Чтобы создать контейнер, выполните команду **isula create**. Контейнерный движок с помощью заданного образа контейнера создаст уровень чтения/записи или использует указанные локальные корневые файловые системы (rootf) в качестве рабочей среды контейнера. После завершения процедуры создания в стандартном командном выводе будет отображен идентификатор контейнера. Запуск контейнера осуществляется командой **isula start**. Новый контейнер находится в состоянии **inited**.

### Формат команды

```
isula create [OPTIONS] IMAGE [COMMAND] [ARG...]
```

### Параметры

В следующей таблице перечислены параметры команды **create**.

**Табл. 1** Описание параметров

| Команда    | Параметр                   | Описание                                                     |
| ---------- | -------------------------- | ------------------------------------------------------------ |
| **create** | --annotation               | Аннотации для контейнера. Например, задайте параметр **native.umask**.  --annotation native.umask=normal #Значением **umask** запущенного контейнера является 0022.  --annotation native.umask=secure #Значением **umask** запущенного контейнера является 0027. Если этот параметр не установлен, используется конфигурация **umask** в iSulad. |
|            | --cap-drop                 | Удаление разрешений Linux.                                   |
|            | --cgroup-parent            | Задает родительский путь к группе cgroup контейнера.         |
|            | --cpuset-cpus              | Разрешенные процессоры (например, 0-3, 0, 1).                |
|            | --cpu-shares               | Процент времени занятия ресурсов процессора (относительный вес). |
|            | --cpu-quota                | Ограничение по квоте CFS процессора.                         |
|            | --device=[]                | Добавление устройства к контейнеру.                          |
|            | --dns                      | Добавление DNS-сервера.                                      |
|            | --dns-opt                  | Добавление параметров DNS.                                   |
|            | --dns-search               | Установка поискового домена контейнера.                      |
|            | -e, --env                  | Настройка переменных среды.                                  |
|            | --env-file                 | Настройка переменных среды с помощью файла.                  |
|            | --entrypoint               | Точка входа, которая должна выполняться при запуске контейнера. |
|            | --external-rootfs=PATH     | Путь к корневой файловой системе (папка или блочное устройство), которая не управляется посредством iSulad для данного контейнера. |
|            | --files-limit              | Ограничение количества файловых дексрипторов, которые можно открыть в контейнере. Значение **-1** указывает на отсутствие ограничений. |
|            | --group-add=[]             | Добавление дополнительных групп пользователей к контейнеру.  |
|            | --help                     | Вывод справочной информации.                                 |
|            | --health-cmd               | Команда, выполняемая в контейнере.                           |
|            | --health-exit-on-unhealthy | Параметр определяет, требуется ли аннулировать контейнер в случае обнаружения его в неработоспособном состоянии (unhealthy). |
|            | --health-interval          | Интервал между двумя последовательными попытками выполнения команды. |
|            | --health-retries           | Максимальное количество повторных попыток проверки состояния работоспособности. |
|            | --health-start-period      | Интервал инициализации контейнера.                           |
|            | --health-timeout           | Максимальная продолжительность выполнения одной команды проверки. |
|            | --hook-spec                | Конфигурационный файл функции перехвата.                     |
|            | -H, --host                 | Путь к файлу сокета iSulad.                                  |
|            | -h, --hostname             | Имя хоста контейнера.                                        |
|            | -i, --interactive          | Активация стандартного потока ввода контейнера, даже если к нему нет подключения. |
|            | --hugetlb-limit=[]         | Ограничение размера файлов огромных страниц, например **--hugetlb-limit 2MB:32MB**. |
|            | --log-opt=[]               | Параметр журнала. По умолчанию функция журнала последовательного порта контейнера включена. Ее активация выполняется командой **--log-opt disable-log=false**. |
|            | -l,--label                 | Установка метки контейнера.                                  |
|            | --lablel-file              | Установка меток контейнеров с помощью файлов.                |
|            | -m, --memory               | Ограничение памяти.                                          |
|            | --memory-reservation       | Тип ограничения памяти контейнера. Значение по умолчанию такое же, как и в случае с **--memory**. **--memory** — это жесткое ограничение, **--memory-reservation** — мягкое ограничение. Если загрузка памяти превышает заданное значение, ее объем динамически регулируется (система пытается перераспределить ресурсы, уменьшая объем занятой памяти до значения ниже заданного). Однако загрузка памяти может превышать заданное значение. Этот параметр должен использоваться вместе с параметром **--memory**. Значение должно быть меньше заданного значения **--memory**. Минимальное значение — 4 MB. |
|            | --memory-swap              | Размер памяти для замены, положительное целое число. Значение **-1** указывает на отсутствие ограничений. |
|            | --memory-swappiness        | Значением является целое число в диапазоне от 0 до 100. Чем меньше значение, тем меньше раздел памяти для замены и тем больше пространства памяти используется в системе Linux. Чем больше значение, тем больше пространства памяти, которое ядро использует для замены. Значение **–1** означает, что используется системное значение по умолчанию. |
|            | --mount                    | Монтирование каталога, тома или файловой системы хоста в контейнер. |
|            | --no-healthcheck           | Отключение функции проверки работоспособности.               |
|            | --name=NAME                | Имя контейнера.                                              |
|            | --net=none                 | Подключение контейнера к сети.                               |
|            | --pids-limit               | Ограничение количества процессов, которые можно выполнить в контейнере. Значение **-1** указывает на отсутствие ограничений. |
|            | --privileged               | Права на расширение контейнера.                              |
|            | -R, --runtime              | Время выполнения контейнера. Значение параметра **lcr** вводится без учета регистра. То есть написание **LCR** и **lcr** эквивалентны. |
|            | --read-only                | Установка корневой файловой системы контейнера в режим «только для чтения». |
|            | --restart                  | Политика перезапуска при завершении работы контейнера. Для системного контейнера поддерживается политика **--restart on-reboot**. |
|            | --storage-opt              | Параметр диска хранения для контейнера.                      |
|            | -t, --tty                  | Параметр выделяет псевдотерминал.                            |
|            | --ulimit                   | Снятие ограничений для контейнера.                           |
|            | -u, --user                 | Имя пользователя или UID в формате **[][:]**.                |
|            | -v, --volume=[]            | Монтирование тома.                                           |
|            | --volumes-from=[]          | Конфигурация монтирования указанного контейнера.             |

### Ограничения

- Если во время запуска контейнера для проверки пользователя или группы используется параметр **--user** или **--group-add** и контейнер использует образ OCI, проверка выполняется в файлах **etc/passwd** и **etc/group** фактических корневых файловых систем (rootfs) образа. Если в качестве rootfs контейнера используется папка или блочное устройство, проверяются файлы **etc/passwd** и **etc/group** на хосте. rootfs игнорируют такие параметры монтирования, как **-v** и 
  **--mount**. То есть, если эти параметры используются для попытки перезаписать файлы **etc/passwd** и **etc/group**, параметры вступают в силу не во время поиска, а только при запуске контейнера. Сгенерированная конфигурация сохраняется в файле **iSulad root directory/engine/container ID/start\_generate\_config.json**. Формат файла выглядит следующим образом:
  
  ```
  {
      "uid": 0,
      "gid": 8,
      "additionalGids": [
          1234,
          8
      ]
  }
  ```

### Пример

Пример создания контейнера.

```
$ isula create busybox
fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
$ isula ps -a
STATUS PID IMAGE   COMMAND EXIT_CODE RESTART_COUNT STARTAT FINISHAT RUNTIME ID           NAMES                                                            inited -   busybox "sh"    0         0             -       -        lcr     fd7376591a9c fd7376591a9c4521...
```

## Запуск контейнера

### Описание

Чтобы запустить один или несколько контейнеров, выполните команду **isula start**.

### Формат команды

```
isula start [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **start**.

**Табл. 1** Описание параметров

| **Команда** | Параметр      | **Описание**                                                 |
| ----------- | ------------- | ------------------------------------------------------------ |
| **start**   | -H, --host    | Путь к файлу сокета iSulad.                                  |
|             | -R, --runtime | Время выполнения контейнера. Значение параметра **lcr** вводится без учета регистра. То есть написание **LCR** и **lcr** эквивалентны. |

### Пример

Пример запуска нового контейнера.

```
$ isula start fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
```

## Создание и запуск контейнера

### Описание

Чтобы создать и запустить контейнер, выполните команду **isula run**. Для создания уровня чтения/записи контейнера и подготовки к выполнению указанной команды можно использовать указанный образ контейнера. Создав контейнер, выполните указанную команду, чтобы его запустить. Команда **run** эквивалентна операциям создания и запуска контейнера.

### Формат команды

```
isula run [OPTIONS] ROOTFS|IMAGE [COMMAND] [ARG...]
```

### Параметры

В следующей таблице перечислены параметры команды **run**.

**Табл. 1** Описание параметров

| **Команда** | Параметр                   | **Описание**                                                 |
| ----------- | -------------------------- | ------------------------------------------------------------ |
| **run**     | --annotation               | Аннотации для контейнера. Например, задайте параметр **native.umask**.  --annotation  native.umask=normal #Значением **umask**  запущенного контейнера является 0022.  --annotation  native.umask=secure #Значением **umask** запущенного контейнера является 0027. Если этот параметр не установлен, используется конфигурация **umask** в iSulad. |
|             | --cap-add                  | Добавление функций Linux.                                    |
|             | --cap-drop                 | Удаление функций Linux.                                      |
|             | --cgroup-parent            | Задает родительский путь к группе cgroup контейнера.         |
|             | --cpuset-cpus              | Разрешенные процессоры (например, 0-3, 0, 1).                |
|             | --cpu-shares               | Процент времени занятия ресурсов процессора (относительный вес). |
|             | --cpu-quota                | Ограничение по квоте CFS процессора.                         |
|             | -d, --detach               | Запуск контейнера в фоновом режиме и отображение идентификатора контейнера. |
|             | --device=[]                | Добавление устройства к контейнеру.                          |
|             | --dns                      | Добавление DNS-сервера.                                      |
|             | --dns-opt                  | Добавление параметров DNS.                                   |
|             | --dns-search               | Установка поискового домена контейнера.                      |
|             | -e, --env                  | Настройка переменных среды.                                  |
|             | --env-file                 | Настройка переменных среды с помощью файла.                  |
|             | --entrypoint               | Точка входа, которая должна выполняться при запуске контейнера. |
|             | --external-rootfs=PATH     | Путь к корневой файловой системе (папка или блочное устройство), которая не управляется посредством iSulad для данного контейнера. |
|             | --files-limit              | Ограничение количества файловых дексрипторов, которые можно открыть в контейнере. Значение **-1** указывает на отсутствие ограничений. |
|             | --group-add=[]             | Добавление дополнительных групп пользователей к контейнеру.  |
|             | --help                     | Вывод справочной информации.                                 |
|             | --health-cmd               | Команда, выполняемая в контейнере.                           |
|             | --health-exit-on-unhealthy | Параметр определяет, требуется ли аннулировать контейнер в случае обнаружения его в неработоспособном состоянии (unhealthy). |
|             | --health-interval          | Интервал между двумя последовательными попытками выполнения команды. |
|             | --health-retries           | Максимальное количество повторных попыток проверки состояния работоспособности. |
|             | --health-start-period      | Интервал инициализации контейнера.                           |
|             | --health-timeout           | Максимальная продолжительность выполнения одной команды проверки. |
|             | --hook-spec                | Конфигурационный файл функции перехвата.                     |
|             | -H, --host                 | Путь к файлу сокета iSulad.                                  |
|             | -h, --hostname             | Имя хоста контейнера.                                        |
|             | --hugetlb-limit=[]         | Ограничение размера файлов огромных страниц, например **--hugetlb-limit 2MB:32MB**. |
|             | -i, --interactive          | Активация стандартного потока ввода контейнера, даже если к нему нет подключения. |
|             | --log-opt=[]               | Параметр журнала. По умолчанию функция журнала последовательного порта контейнера включена. Ее активация выполняется командой **--log-opt disable-log=false**. |
|             | -m, --memory               | Ограничение памяти.                                          |
|             | --memory-reservation       | Тип ограничения памяти контейнера. Значение по умолчанию такое же, как и в случае с **--memory**. **--memory** — это жесткое ограничение, **--memory-reservation** — мягкое ограничение. Если загрузка памяти превышает заданное значение, ее объем динамически регулируется (система пытается перераспределить ресурсы, уменьшая объем занятой памяти до значения ниже заданного). Однако загрузка памяти может превышать заданное значение. Этот параметр должен использоваться вместе с параметром **--memory**. Значение должно быть меньше заданного значения **--memory**. Минимальное значение — 4 MB. |
|             | --memory-swap              | Размер памяти для замены, положительное целое число. Значение **-1** указывает на отсутствие ограничений. |
|             | --memory-swappiness        | Значением является целое число в диапазоне от 0 до 100. Чем меньше значение, тем меньше раздел памяти для замены и тем больше пространства памяти используется в системе Linux. Чем больше значение, тем больше пространства памяти, которое ядро использует для замены. Значение **–1** означает, что используется системное значение по умолчанию. |
|             | --mount                    | Монтирование каталога хоста в контейнер.                     |
|             | --no-healthcheck           | Отключение функции проверки работоспособности.               |
|             | --name=NAME                | Имя контейнера.                                              |
|             | --net=none                 | Подключение контейнера к сети.                               |
|             | --pids-limit               | Ограничение количества процессов, которые можно выполнить в контейнере. Значение **-1** указывает на отсутствие ограничений. |
|             | --privileged               | Права на расширение контейнера.                              |
|             | -R, --runtime              | Время выполнения контейнера. Значение параметра **lcr** вводится без учета регистра. То есть написание **LCR** и **lcr** эквивалентны. |
|             | --read-only                | Установка корневой файловой системы контейнера в режим «только для чтения». |
|             | --restart                  | Политика перезапуска при завершении работы контейнера. Для системного контейнера поддерживается политика **--restart on-reboot**. |
|             | --rm                       | Автоматический сброс контейнера при выходе.                  |
|             | --storage-opt              | Параметр диска хранения для контейнера.                      |
|             | -t, --tty                  | Параметр выделяет псевдотерминал.                            |
|             | -ulimit                    | Снятие ограничений для контейнера.                           |
|             | -u, --user                 | Имя пользователя или UID в формате **[][:]**.                |
|             | -v, --volume=[]            | Монтирование тома.                                           |

### Ограничения

- Когда родительский процесс контейнера завершается, работа самого контейнера также автоматически завершается.

- При создании стандартного контейнера нельзя инициировать родительский процесс в связи с недостаточностью разрешений таких контейнеров. В результате контейнер не отвечает при выполнении команды **attach**, хотя был успешно создан.

- Если во время запуска контейнера не указан параметр **--net**, имя хоста по умолчанию — **localhost**.

- Если параметр **--files-limit** должен передать небольшое значение, например, 1, то при запуске контейнера iSulad создает контрольную группу cgroup, устанавливает значение file.limit и записывает PID процесса контейнера в файл **cgroup.procs** данной группы. В этом случае процесс контейнера открывает несколько дескрипторов. В результате передается ошибка записи, и контейнер не запускается.

- Если существуют и **--mount**, и **--volume**, и их пути назначения конфликтуют, **--mount** будет выполнен после **--volume** (то есть, точка монтирования в **--volume** будет перезаписана).
  
  Примечание. Значением параметра **type** облегченных контейнеров может быть **bind** или **squashfs**. Когда параметру **type** задано значение **squashfs**, путем к образу будет **src**. Значением параметра **type** в native Docker могут быть **bind**, **volume** и **tmpfs**.

- Политика перезапуска не поддерживает режим **unless-stopped**.

- В следующих трех сценариях возвращается значение 127 для контейнера Docker и 125 для облегченных контейнеров:
  
  Устройство хоста, заданное параметром **--device**, не существует.
  
  Файл JSON для функции перехвата (hook), заданный параметром **--hook-spec**, не существует.
  
  Входная точка, заданная параметром **--entrypoint**, не существует.

- При использовании параметра **--volume** /dev/ptmx удаляется и воссоздается во время запуска контейнера. Поэтому не монтируйте каталог **/dev** в каталоге контейнера. Используйте -**-device** для монтирования устройств в каталог **/dev** контейнера.

- Не используйте параметр echo в качестве стандартного ввода команды **run**. В противном случае работа клиента будет приостановлена. Значение echo должно быть передано в контейнер напрямую в качестве параметра командной строки.
  
  ```
  [root@localhost ~]# echo ls | isula run -i busybox /bin/sh
  
  
  ^C
  [root@localhost ~]# 
  ```
  
  Клиент приостанавливает работу при выполнении вышеприведенной команды в связи с тем, что эта команда эквивалентна вводу **ls** в **stdin**. Затем считывается EOF, и клиент не отправляет данные и ждет выхода сервера. Однако сервер не может определить, нужно ли клиенту продолжать отправку данных. В результате сервер приостанавливает чтение данных, и обе стороны также приостанавливают работу.
  
  Корректный метод выполнения следующий:
  
  ```
  [root@localhost ~]# isula run -i busybox ls
  bin
  dev
  etc
  home
  proc
  root
  sys
  tmp
  usr
  var
  [root@localhost ~]# 
  ```

- Если в качестве файловой системы контейнера используется корневой каталог (/) хоста, во время монтирования могут возникнуть следующие ситуации:
  
  **Табл. 2** Сценарии монтирования
  
  | **Путь к хосту (источник)** | **Путь к контейнеру (объект назначения)** |
  | --------------------------- | ----------------------------------------- |
  | /home/test1                 | /mnt/                                     |
  | /home/test2                 | /mnt/abc                                  |
  
  > ![](./public_sys-resources/icon-notice.gif) **ПРИМЕЧАНИЕ**:  
  Сценарий 1. Монтирование **/home/test1** с последующим монтированием **/home/test2**. В этом случае содержимое **/home/test1** перезаписывает содержимое в **/mnt**. В результате каталог **abc** не существует в **/mnt**, и операция монтирования **/home/test2** в **/mnt/abc** не выполняется.  
  Сценарий 2. Монтирование **/home/test2** с последующим монтированием **/home/test1**. В этом случае содержимое **/mnt** заменяется содержимым **/home/test1** во время второго монтирования. Таким образом, содержимое, смонтированное во время первого монтирования из **/home/test2** в **/mnt/abc**, перезаписывается.  
  Первый сценарий не поддерживается. Для второго сценария пользователям необходимо учесть риск сбоев доступа к данным.
  
  > ![](./public_sys-resources/icon-notice.gif) **ПРИМЕЧАНИЕ**:
  > 
  > - В сценариях, требующих высокой степени параллелизма (одновременный запуск 200 контейнеров), механизм управления памятью Glibc может выделить часть памяти под функцию memory hole и значительно увеличить виртуальную память (например, до 10 ГБ). Эта проблема вызвана ограничением механизма управления памятью Glibc в сценариях с высокой степенью параллелизма, но не утечкой памяти. Таким образом, загрузка памяти не увеличивается бесконечно. Для уменьшения виртуальной памяти и повышения вероятности уменьшения физической памяти можно настроить переменную среды **MALLOC\_ARENA\_MAX**. Однако эта переменная среды приведет к ухудшению производительности параллельно выполняемых задач iSulad. Установите эту переменную среды в соответствии с условиями площадки.
  > 
  > ```
  > To balance performance and memory usage, set MALLOC_ARENA_MAX to 4. (The iSulad performance deterioration on the ARM64 server is controlled by less than 10%.)  
  > Configuration method:  
  > 1. To manually start iSulad, run the export MALLOC_ARENA_MAX=4 command and then start the iSulad.  
  > 2. If systemd manages iSulad, you can modify the /etc/sysconfig/iSulad file by adding MALLOC_ARENA_MAX=4.  
  > ```

### Пример

Пример создания и запуска нового контейнера.

```
$ isula run -itd busybox
9c2c13b6c35f132f49fb7ffad24f9e673a07b7fe9918f97c0591f0d7014c713b
```

## Остановка контейнера

### Описание

Чтобы остановить контейнер, выполните команду **isula stop**. В первый процесс в контейнере отправляется сигнал SIGTERM. Если контейнер не останавливается в течение указанного времени (10 секунд по умолчанию), отправляется сигнал SIGKILL.

### Формат команды

```
isula stop [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **stop**.

**Табл. 1** Описание параметров

| **Команда** | Параметр    | **Описание**                                                 |
| ----------- | ----------- | ------------------------------------------------------------ |
| **stop**    | -f, --force | Принудительная остановка работающего контейнера.             |
|             | -H, --host  | Путь к файлу сокета iSulad.                                  |
|             | -t, --time  | Время ожидания постепенной остановки. Если время ожидания превышает значение этого параметра, контейнер принудительно останавливается. |

### Ограничения

- Если указан параметр **t**, значение которого меньше **0**, убедитесь, что приложение в контейнере может обрабатывать сигнал остановки.
  
  Принцип работы команды **stop**: в контейнер посылается сигнал SIGTERM и, если после окончания периода ожидания (**t** задается пользователем) контейнер все еще работает, посылается сигнал SIGKILL для принудительного завершения процесса контейнера.

- Значение вводимого параметра **t** следующее:
  
  **t** \< 0: ожидание постепенной остановки. Эта настройка предпочтительна, если пользователи уверены, что их приложения корректно обрабатывают сигналы остановки.
  
  **t**  = 0: посылка команды **kill -9** для немедленного завершения.
  
  **t**  > 0: ожидание в течение заданного периода и посылка команды **kill -9** в контейнер, если контейнер не останавливается в течение данного периода.
  
  Поэтому, если параметру **t** задано значение меньше **0** (например, t = -1), убедитесь, что приложение контейнера корректно обрабатывает сигнал SIGTERM. Если контейнер игнорирует этот сигнал, он будет приостановлен командой **isula stop**.

### Пример

Пример остановки контейнера.

```
$ isula stop fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
```

## Принудительная остановка контейнера

### Описание

Чтобы принудительно остановить один или несколько контейнеров, выполните команду **isula kill**.

### Формат команды

```
isula kill [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **kill**.

**Табл. 1** Описание параметров

| **Команда** | Параметр     | **Описание**                      |
| ----------- | ------------ | --------------------------------- |
| **kill**    | -H, --host   | Путь к файлу сокета iSulad.       |
|             | -s, --signal | Сигнал, отправленный в контейнер. |

### Пример

Пример принудительной остановки контейнера.

```
$ isula kill fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
```

## Удаление контейнера

### Описание

Чтобы удалить контейнер, выполните команду **isula rm**.

### Формат команды

```
isula rm [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **rm**.

**Табл. 1** Описание параметров

| **Команда** | Параметр     | **Описание**                                                 |
| ----------- | ------------ | ------------------------------------------------------------ |
| **rm**      | -f, --force  | Принудительное удаление работающего контейнера.              |
|             | -H, --host   | Путь к файлу сокета iSulad.                                  |
|             | -v, --volume | Удаление тома, смонтированного на контейнере. (Обратите внимание, что в настоящее время в iSulad эта функция не используется.) |

### Ограничения

- В обычных сценариях ввода-вывода для удаления работающего контейнера в пустой среде (среде с одним контейнером) требуется T1. В среде с 200 контейнерами (без большого количества операций ввода-вывода и с нормальным вводом-выводом хоста) для удаления работающего контейнера требуется T2. Спецификации T2: T2 = максимум {T1 x 3, 5} с.

### Пример

Пример удаления остановленного контейнера.

```
$ isula rm fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
```

## Присоединение к контейнеру

### Описание

Чтобы присоединить стандартные потоки ввода, вывода и ошибок текущего терминала к работающему контейнеру, выполните команду **isula attach.** Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula attach [OPTIONS] CONTAINER
```

### Параметры

В следующей таблице перечислены параметры команды **attach**.

**Табл. 1** Описание параметров

| **Команда** | **Параметр** | **Описание**                 |
| ----------- | ------------ | ---------------------------- |
| **attach**  | --help       | Вывод справочной информации. |
|             | -H, --host   | Путь к файлу сокета iSulad.  |
|             | -D, --debug  | Активация режима отладки.    |

### Ограничения

- Вход в контейнер native Docker осуществляется сразу с выполнением команды **attach**. Чтобы войти в контейнер iSulad, необходимо выполнить команду **attach** и нажать **Enter**.

### Пример

Пример присоединения к работающему контейнеру.

```
$ isula attach fd7376591a9c3d8ee9a14f5d2c2e5255b02cc44cddaabca82170efd4497510e1
/ #
/ #
```

## Переименование контейнера

### Описание

Чтобы переименовать контейнер, выполните команду **isula rename**.

### Формат команды

```
isula rename [OPTIONS] OLD_NAME NEW_NAME
```

### Параметры

В следующей таблице перечислены параметры команды **rename**.

**Табл. 1** Описание параметров

| **Команда** | Параметр   | **Описание**              |
| ----------- | ---------- | ------------------------- |
| **rename**  | -H, --host | Переименование контейнера |

### Пример

Пример переименования контейнера.

```
$ isula rename my_container my_new_container
```

## Выполнение команды в работающем контейнере

### Описание

Чтобы выполнить команду в работающем контейнере, выполните команду **isula exec.** Эта команда выполняется в каталоге по умолчанию контейнера. Если для базового образа указан пользовательский каталог, используется указанный каталог.

### Формат команды

```
isula exec [OPTIONS] CONTAINER COMMAND [ARG...]
```

### Параметры

В следующей таблице перечислены параметры команды **exec**.

**Табл. 1** Описание параметров

| **Команда** | Параметр          | **Описание**                                                 |
| ----------- | ----------------- | ------------------------------------------------------------ |
| **exec**    | -d, --detach      | Выполнение команды в фоновом режиме.                         |
|             | -e, --env         | Настройка переменных среды. (Обратите внимание, что в настоящее время в iSulad эта функция не используется.) |
|             | -H, --host        | Путь к файлу сокета iSulad.                                  |
|             | -i, --interactive | Включение стандартного ввода при отсутствии установленного соединения. (Обратите внимание, что в настоящее время в iSulad эта функция не используется.) |
|             | -t, --tty         | Параметр выделяет псевдотерминал. (Обратите внимание, что в настоящее время в iSulad эта функция не используется.) |
|             | -u, --user        | Вход в контейнер от имени указанного пользователя.           |

### Ограничения

- Если в команде **isula exec** не указан ни один параметр, по умолчанию используется параметр **-it**, что указывает на выделение псевдотерминала и доступ к контейнеру в интерактивном режиме.

- Запуская команду **isula exec** для выполнения скрипта и фонового процесса в скрипте, необходимо использовать флаг **nohup**, который устанавливает игнорирование сигнала **SIGHUP**.
  
  В противном случае ядро отправляет сигнал **SIGHUP** процессу, выполняемому в фоновом режиме, по его завершении (первый процесс сеанса). В результате фоновые процессы завершаются и возникают процессы-зомби.

- После выполнения команды **isula exec** для доступа к процессу контейнера не запускайте фоновые программы. В противном случае работа системы будет приостановлена.
  
  Запуск команды **isula exec** для выполнения фонового процесса осуществляется в три шага:
  
  1. Выполните команду **isula exec container\_name bash**, чтобы получить доступ к контейнеру.
  2. Войдя в контейнер, выполните команду **script \&**.
  3. Выполните команду **exit**. Терминал прекращает отвечать.
  
  ```
  After the isula exec command is executed to enter the container, the background program stops responding because the isula exec command is executed to enter the container and run the background while1 program. When the bash command is run to exit the process, the while1 program does not exit and becomes an orphan process, which is taken over by process 1.
  The while1 process is executed by the initial bash process fork &exec of the container. The while1 process copies the file handle of the bash process. As a result, the handle is not completely closed when the bash process exits.
  The console process cannot receive the handle closing event, epoll_wait stops responding, and the process does not exit.
  ```

- Не запускайте команду **isula exec** в фоновом режиме. Иначе может приостановиться работа системы.
  
  Запуск команды **isula exec** в фоновом режиме осуществляется следующим образом:
  
  Выполните команду **isula exec script \&** в фоновом режиме, например, **isula exec container\_name script \&,isula exec**. Команда выполняется в фоновом режиме. Скрипт постоянно отображает файл путем выполнения команды **cat**. Как правило, на текущем терминале выводится результат выполнения команды. При нажатии **Enter** на текущем терминале клиент выходит из операции чтения stdout в связи с ошибкой операции чтения подсистемы ввода-вывода. В результате терминал данные не выводит. Сервер продолжает записывать данные в буфер FIFO, так как процесс все еще отображает файлы выполнением команды **cat**. В случае заполнения буфера процесс в контейнере приостанавливается во время операции записи.

- Когда облегченный контейнер с помощью команды **exec** выполняет системные вызовы pipe, рекомендуется выполнить команду **/bin/bash -c**.
  
  Типичные сценарии применения:
  
  Подсчет количества файлов xx в тестовом каталоге командой **isula exec container\_name -it ls /test \| grep "xx" \| wc -l**. Выходные потоки обрабатываются утилитами **grep** и **wc** через конвейер (системный вызов pipe), поскольку **ls /test** выполняется командой **exec**. Вывод **ls /test,** выполненный **exec,** содержит разрывы строк. При обработке вывода результат неверный.
  
  **Причины.** Выполните команду **ls /test**, используя **exec**. В командном выводе содержится знак перевода строки. Выполните команду **\| grep "xx" \| wc -l** для выходного потока. Результатом обработки будет 2 (две строки).
  
  ```
  [root@localhost ~]# isula exec  -it container ls /test
  xx    xx10  xx12  xx14  xx3   xx5   xx7   xx9
  xx1   xx11  xx13  xx2   xx4   xx6   xx8
  [root@localhost ~]#
  ```
  
  **Рекомендация.** Выполняя команду **run/exec** для системного вызова pipe, выполните команду **/bin/bash -c** для системного вызова pipe в контейнере.
  
  ```
  [root@localhost ~]# isula exec  -it container  /bin/sh -c "ls /test | grep "xx" | wc -l"
  15
  [root@localhost ~]#
  ```

- Не используйте параметр **echo** в качестве стандартного ввода команды **exec**. В противном случае работа клиента будет приостановлена. Значение echo должно быть передано в контейнер напрямую в качестве параметра командной строки.
  
  ```
  [root@localhost ~]# echo ls | isula exec 38 /bin/sh
  
  
  ^C
  [root@localhost ~]# 
  ```
  
  Клиент приостанавливает работу при выполнении вышеприведенной команды в связи с тем, что эта команда эквивалентна вводу **ls** в **stdin**. Затем считывается EOF, и клиент не отправляет данных и ждет выхода сервера. Однако сервер не может определить, нужно ли клиенту продолжать отправку данных. В результате сервер приостанавливает чтение данных, и обе стороны также приостанавливают работу.
  
  Корректный метод выполнения следующий:
  
  ```
  [root@localhost ~]# isula exec 38 ls
  bin   dev   etc   home  proc  root  sys   tmp   usr   var
  ```

### Пример

Пример выполнения команды echo в работающем контейнере.

```
$ isula exec c75284634bee echo "hello,world"
hello,world
```

## Запрос информации об одном контейнере

### Описание

Чтобы запросить информацию об одном контейнере, выполните команду **isula inspect.**

### Формат команды

```
isula inspect [OPTIONS] CONTAINER|IMAGE [CONTAINER|IMAGE...]
```

### Параметры

В следующей таблице перечислены параметры команды **inspect**.

**Табл. 1** Описание параметров

| **Команда** | Параметр     | **Описание**                                                 |
| ----------- | ------------ | ------------------------------------------------------------ |
| **inspect** | -H, --host   | Путь к файлу сокета iSulad.                                  |
|             | -f, --format | Формат вывода.                                               |
|             | -t, --time   | Интервал времени ожидания в секундах. В случае невыполнения команды **inspect**, которая запрашивает информацию о контейнере, в течение указанного периода времени, система прекращает ожидание и немедленно сообщает об ошибке. Значение по умолчанию — **120s**. Если значение меньше или равно 0, команда **inspect** продолжает ожидание, пока информация о контейнере не будет получена. |



### Ограничения

- Облегченные контейнеры не поддерживают вывод в формате { {.State}, но поддерживают вывод в формате { {json.State}. Параметр -f не поддерживается, когда объект является образом.

### Пример

Пример запроса информации о контейнере.

```
$ isula inspect c75284634bee
[
    {
        "Id": "c75284634beeede3ab86c828790b439d16b6ed8a537550456b1f94eb852c1c0a",
        "Created": "2019-08-01T22:48:13.993304927-04:00",
        "Path": "sh",
        "Args": [],
        "State": {
            "Status": "running",
            "Running": true,
            "Paused": false,
            "Restarting": false,
            "Pid": 21164,
            "ExitCode": 0,
            "Error": "",
            "StartedAt": "2019-08-02T06:09:25.535049168-04:00",
            "FinishedAt": "2019-08-02T04:28:09.479766839-04:00",
            "Health": {
                "Status": "",
                "FailingStreak": 0,
                "Log": []
            }
        },
        "Image": "busybox",
        "ResolvConfPath": "",
        "HostnamePath": "",
        "HostsPath": "",
        "LogPath": "none",
        "Name": "c75284634beeede3ab86c828790b439d16b6ed8a537550456b1f94eb852c1c0a",
        "RestartCount": 0,
        "HostConfig": {
            "Binds": [],
            "NetworkMode": "",
            "GroupAdd": [],
            "IpcMode": "",
            "PidMode": "",
            "Privileged": false,
            "SystemContainer": false,
            "NsChangeFiles": [],
            "UserRemap": "",
            "ShmSize": 67108864,
            "AutoRemove": false,
            "AutoRemoveBak": false,
            "ReadonlyRootfs": false,
            "UTSMode": "",
            "UsernsMode": "",
            "Sysctls": {},
            "Runtime": "lcr",
            "RestartPolicy": {
                "Name": "no",
                "MaximumRetryCount": 0
            },
            "CapAdd": [],
            "CapDrop": [],
            "Dns": [],
            "DnsOptions": [],
            "DnsSearch": [],
            "ExtraHosts": [],
            "HookSpec": "",
            "CPUShares": 0,
            "Memory": 0,
            "OomScoreAdj": 0,
            "BlkioWeight": 0,
            "BlkioWeightDevice": [],
            "CPUPeriod": 0,
            "CPUQuota": 0,
            "CPURealtimePeriod": 0,
            "CPURealtimeRuntime": 0,
            "CpusetCpus": "",
            "CpusetMems": "",
            "SecurityOpt": [],
            "StorageOpt": {},
            "KernelMemory": 0,
            "MemoryReservation": 0,
            "MemorySwap": 0,
            "OomKillDisable": false,
            "PidsLimit": 0,
            "FilesLimit": 0,
            "Ulimits": [],
            "Hugetlbs": [],
            "HostChannel": {
                "PathOnHost": "",
                "PathInContainer": "",
                "Permissions": "",
                "Size": 0
            },
            "EnvTargetFile": "",
            "ExternalRootfs": ""
        },
        "Mounts": [],
        "Config": {
            "Hostname": "localhost",
            "User": "",
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
                "TERM=xterm",
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Tty": true,
            "Cmd": [
                "sh"
            ],
            "Entrypoint": [],
            "Labels": {},
            "Annotations": {
                "log.console.file": "none",
                "log.console.filerotate": "7",
                "log.console.filesize": "1MB",
                "rootfs.mount": "/var/lib/isulad/mnt/rootfs",
                "native.umask": "secure"
            },
            "HealthCheck": {
                "Test": [],
                "Interval": 0,
                "Timeout": 0,
                "StartPeriod": 0,
                "Retries": 0,
                "ExitOnUnhealthy": false
            }
        },
        "NetworkSettings": {
            "IPAddress": ""
        }
    }
]
```

## Запрос информации обо всех контейнерах

### Описание

Чтобы запросить информацию обо всех контейнерах, выполните команду **isula ps.**

### Формат команды

```
isula ps [OPTIONS]
```

### Параметры

В следующей таблице перечислены параметры команды **ps**.

**Табл. 1** Описание параметров

| **Команда** | Параметр     | **Описание**                                     |
| ----------- | ------------ | ------------------------------------------------ |
| **ps**      | -a, --all    | Отображение всех контейнеров.                    |
|             | -H, --host   | Путь к файлу сокета iSulad.                      |
|             | -q, --quiet  | Отображение только имени образа.                 |
|             | -f, --filter | Добавление критериев фильтра.                    |
|             | --format     | Формат вывода.                                   |
|             | --no-trunc   | Отмена усечения длины идентификатора контейнера. |

 

### Пример

Пример запроса информации обо всех контейнерах.

```
$ isula ps -a

ID           IMAGE                                     STATUS  PID    COMMAND EXIT_CODE RESTART_COUNT STARTAT        FINISHAT    RUNTIME NAMES
e84660aa059c rnd-dockerhub.huawei.com/official/busybox running 304765 "sh"    0         0             13 minutes ago -           lcr     e84660aa059cafb0a77a4002e65cc9186949132b8e57b7f4d76aa22f28fde016
$ isula ps -a --format "table {{.ID}} {{.Image}}" --no-trunc
ID                                                               IMAGE
e84660aa059cafb0a77a4002e65cc9186949132b8e57b7f4d76aa22f28fde016 rnd-dockerhub.huawei.com/official/busybox

```

## Перезапуск контейнера

### Описание

Чтобы перезапустить один или несколько контейнеров, выполните команду **isula restart**.

### Формат команды

```
isula restart [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **restart**.

**Табл. 1** Описание параметров

| **Команда** | Параметр   | **Описание**                                                 |
| ----------- | ---------- | ------------------------------------------------------------ |
| **restart** | -H, --host | Путь к файлу сокета iSulad.                                  |
|             | -t, --time | Время ожидания постепенной остановки. Если время ожидания превышает значение этого параметра, контейнер принудительно останавливается. |



### Ограничения

- Если указан параметр **t**, значение которого меньше **0**, убедитесь, что приложение в контейнере может обрабатывать сигнал остановки.
  
  Команда restart сначала вызывает команду stop, чтобы остановить контейнер. В контейнер посылается сигнал SIGTERM и, если после окончания периода ожидания (**t** задается пользователем) контейнер все еще работает, посылается сигнал SIGKILL для принудительного завершения процесса контейнера.

- Значение вводимого параметра **t** следующее:
  
  **t** \< 0: ожидание постепенной остановки. Эта настройка предпочтительна, если пользователи уверены, что их приложения корректно обрабатывают сигналы остановки.
  
  **t**  = 0: посылка команды **kill -9** для немедленного завершения.
  
  **t**  > 0: ожидание в течение заданного периода и посылка команды **kill -9** в контейнер, если контейнер не останавливается в течение данного периода.
  
  Поэтому, если параметру **t** задано значение меньше **0** (например, t = -1), убедитесь, что приложение контейнера корректно обрабатывает сигнал SIGTERM. Если контейнер игнорирует этот сигнал, он будет приостановлен командой **isula stop**.

### Пример

Пример перезапуска контейнера.

```
$ isula restart c75284634beeede3ab86c828790b439d16b6ed8a537550456b1f94eb852c1c0a
 c75284634beeede3ab86c828790b439d16b6ed8a537550456b1f94eb852c1c0a 
```

## Ожидание завершения работы контейнера

### Описание

Чтобы подождать завершения работы одного или нескольких контейнеров, выполните команду **isula wait**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula wait [OPTIONS] CONTAINER [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **wait**.

**Табл. 1** Описание параметров

| **Команда** | Параметр   | **Описание**                                                 |
| ----------- | ---------- | ------------------------------------------------------------ |
| **wait**    | -H, --host | Путь к файлу сокета iSulad.                                  |
|             | /          | Блокировка до момента остановки контейнера и отображение кода выхода. |



### Пример

Пример ожидания завершения работы одного контейнера.

```
$ isula wait c75284634beeede3ab86c828790b439d16b6ed8a537550456b1f94eb852c1c0a
 137 
```

## Просмотр информации о процессах в контейнере

### Описание

Чтобы просмотреть информацию о процессах в контейнере, выполните команду **isula top**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula top [OPTIONS] container [ps options]
```

### Параметры

В следующей таблице перечислены параметры команды **top**.

**Табл. 1** Описание параметров

| **Команда** | Параметр   | **Описание**                                         |
| ----------- | ---------- | ---------------------------------------------------- |
| **top**     | -H, --host | Путь к файлу сокета iSulad.                          |
|             | /          | Запрос информации о процессе работающего контейнера. |



### Пример

Пример просмотра информации о процессах в контейнере.

```
$ isula top 21fac8bb9ea8e0be4313c8acea765c8b4798b7d06e043bbab99fc20efa72629c
UID        PID  PPID  C STIME TTY          TIME CMD
root     22166 22163  0 23:04 pts/1    00:00:00 sh
```

## Отображение статистики использования ресурсов контейнера

### Описание

Чтобы отобразить статистику использования ресурсов в реальном времени, выполните команду **isula stats.** Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula stats [OPTIONS] [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **stats**.

**Табл. 1** Описание параметров

| **Команда** | Параметр    | **Описание**                                                 |
| ----------- | ----------- | ------------------------------------------------------------ |
| **stats**   | -H, --host  | Путь к файлу сокета iSulad.                                  |
|             | -a, --all   | Отображение всех контейнеров. (По умолчанию выводятся только работающие контейнеры.) |
|             | --no-stream | Отображение только первого результата. Отображается только статистика в режиме без потока. |



### Пример

Пример отображения статистики использования ресурсов.

```
$ isula stats --no-stream 21fac8bb9ea8e0be4313c8acea765c8b4798b7d06e043bbab99fc20efa72629c                                                                                 CONTAINER        CPU %      MEM USAGE / LIMIT          MEM %      BLOCK I / O                PIDS      
21fac8bb9ea8     0.00       56.00 KiB / 7.45 GiB       0.00       0.00 B / 0.00 B            1  
```

## Получение журналов контейнера

### Описание

Чтобы получить журналы контейнера, выполните команду **isula logs**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula logs [OPTIONS] [CONTAINER...]
```

### Параметры

В следующей таблице перечислены параметры команды **logs**.

**Табл. 1** Описание параметров

| **Команда** | Параметр     | **Описание**                            |
| ----------- | ------------ | --------------------------------------- |
| **logs**    | -H, --host   | Путь к файлу сокета iSulad.             |
|             | -f, --follow | Трассировка вывода журнала.             |
|             | --tail       | Отображение количества записей журнала. |



### Ограничения

- По умолчанию функция журнала контейнера включена. Чтобы отключить эту функцию, выполните команду **isula create --log-opt disable-log=true** или **isula run --log-opt disable-log=true**.

### Пример

Пример получения журналов контейнера.

```
$ isula logs 6a144695f5dae81e22700a8a78fac28b19f8bf40e8827568b3329c7d4f742406
hello, world
hello, world
hello, world
```

## Копирование данных между контейнером и хостом

### Описание

Чтобы скопировать данные между хостом и контейнером, выполните команду **isula cp**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH
isula cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH
```

### Параметры

В следующей таблице перечислены параметры команды **cp**.

**Табл. 1** Описание параметров

| **Команда** | Параметр   | **Описание**                |
| ----------- | ---------- | --------------------------- |
| **cp**      | -H, --host | Путь к файлу сокета iSulad. |

 

### Ограничения

- Когда iSulad копирует файлы, обратите внимание на то, что на хост не монтируются файлы **/etc/hostname**, **/etc/resolv.conf**, **/etc/hosts**, а также параметры **--volume** и **--mount**. Поэтому в образ копируются исходные файлы вместо файлов, содержащихся в реальном контейнере.
  
  ```
  [root@localhost tmp]# isula cp b330e9be717a:/etc/hostname /tmp/hostname
  [root@localhost tmp]# cat /tmp/hostname
  [root@localhost tmp]# 
  ```

- При распаковке файла iSulad не проверяет тип файла или папки, которые должны быть перезаписаны в файловой системе, а сам iSulad перезаписывает файл или папку. Поэтому, если источником является папка, файл с таким же именем принудительно перезаписывается как папка. Если источником является файл, папка с таким же именем принудительно перезаписывается как файл.
  
  ```
  [root@localhost tmp]# rm -rf /tmp/test_file_to_dir && mkdir /tmp/test_file_to_dir
  [root@localhost tmp]# isula exec b330e9be717a /bin/sh -c "rm -rf /tmp/test_file_to_dir && touch /tmp/test_file_to_dir"
  [root@localhost tmp]# isula cp b330e9be717a:/tmp/test_file_to_dir /tmp
  [root@localhost tmp]# ls -al /tmp | grep test_file_to_dir
  -rw-r-----    1 root     root             0 Apr 26 09:59 test_file_to_dir
  ```

- Во время процесса копирования iSulad замораживает контейнер и восстанавливает его по завершении копирования.

### Пример

В данном примере копируется каталог **/test/host** хоста в каталог **/test** контейнера 21fac8bb9ea8.

```
isula cp /test/host 21fac8bb9ea8:/test
```

В данном примере копируется каталог **/www** контейнера 21fac8bb9ea8 в каталог **/tmp** хоста.

```
isula cp 21fac8bb9ea8:/www /tmp/
```

## Постановка контейнера на паузу

### Описание

Чтобы поставить на паузу все процессы контейнера, выполните команду **isula pause**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula pause CONTAINER [CONTAINER...]
```

### Параметры

| **Команда** | Параметр   | **Описание**                |
| ----------- | ---------- | --------------------------- |
| pause       | -H, --host | Путь к файлу сокета iSulad. |



### Ограничения

- На паузу можно поставить только запущенные и работающие контейнеры.
- После постановки контейнера на паузу недоступны другие операции управления жизненным циклом (например, **restart**, **exec**, **attach**, **kill**, **stop**, **rm**).
- Статус контейнера, у которого настроены параметры проверки работоспособности, после постановки на паузу меняется на **unhealthy**.

### Пример

Пример постановки на паузу работающего контейнера.

```
$ isula pause 8fe25506fb5883b74c2457f453a960d1ae27a24ee45cdd78fb7426d2022a8bac
 8fe25506fb5883b74c2457f453a960d1ae27a24ee45cdd78fb7426d2022a8bac 
```

## Возобновление работы контейнера

### Описание

Чтобы возобновить работу всех процессов контейнера, выполните команду **isula unpause**. Это обратный процесс операции **isula pause**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula unpause CONTAINER [CONTAINER...]
```

### Параметры

| **Команда** | Параметр   | **Описание**                |
| ----------- | ---------- | --------------------------- |
| pause       | -H, --host | Путь к файлу сокета iSulad. |



### Ограничения

- Возобновить работу процессов после паузы можно только тех контейнеров, которые находятся в состоянии паузы.

### Пример

Пример возобновления работы контейнера, поставленного на паузу.

```
$ isula unpause 8fe25506fb5883b74c2457f453a960d1ae27a24ee45cdd78fb7426d2022a8bac
 8fe25506fb5883b74c2457f453a960d1ae27a24ee45cdd78fb7426d2022a8bac 
```

## Получение сообщений о событиях от сервера в реальном времени

### **Описание**

Для получения от сервера в режиме реального времени сообщений о таких событиях, как жизненный цикл образа контейнера и рабочее событие, используется команда **isula events**. Поддерживаются только контейнеры, время выполнения которых имеет тип LCR.

### Формат команды

```
isula events [OPTIONS]
```

### Параметр

| Команда | Параметр    | Описание                                                     |
| ------- | ----------- | ------------------------------------------------------------ |
| events  | -H, --host  | Путь к файлу сокета iSulad.                                  |
|         | -n, --name  | Получение сообщений о событиях указанного контейнера.        |
|         | -S, --since | Получение сообщений о событиях, сгенерированных с указанного момента времени. |



### Пример

В данном примере введенная команда получает сообщения о событиях от сервера в реальном времени:

```
$ isula events
```