# Максимальное количество дескрипторов

- [Максимальное количество дескрипторов](#maximum-number-of-handles)

## Описание функционала

Системные контейнеры поддерживают возможность ограничения количества дескрипторов файлов. Дескрипторы файлов подразделяются на общие дескрипторы и сетевые сокеты. Запуская контейнер, можно ограничить максимальное количество дескрипторов настройкой параметра **--files-limit**.

## Описание параметров

| **Команда**       | **Параметр**  | **Описание значений**                                        |
| ----------------- | ------------- | ------------------------------------------------------------ |
| isula  create/run | --files-limit | Параметр принимает только целые, неотрицательные значения. Значение **0** означает, что количество дескрипторов не ограничено данным параметром. Максимальное количество определяется в текущем файле cgroup ядра. |

## Ограничения

- Если указать слишком маленькое значение **--files-limit**, это может привести к тому, что системный контейнер не сможет выполнить команду **exec**, при этом будет передана ошибка «open temporary files». Поэтому рекомендуется установить для параметра достаточно большое значение.
- Дескрипторы файлов подразделяются на общие дескрипторы и сетевые сокеты.

## Пример

Чтобы ограничить количество дескрипторов файлов **--files-limit**, открываемых в контейнере, выполните следующую команду, которая проверяет, поддерживает ядро файлы cgroup или нет:

```
[root@localhost ~]# cat /proc/1/cgroup | grep files
10:files:/
```

Если отображается **files**, файлы cgroup поддерживаются.

Запустите контейнер, настройте параметр **--files-limit** и убедитесь, что параметр **files.limit** успешно записан.

```
[root@localhost ~]# isula run  -tid --files-limit 1024 --system-container  --external-rootfs /tmp/root-fs  empty init 01e82fcf97d4937aa1d96eb8067f9f23e4707b92de152328c3fc0ecb5f64e91d 
[root@localhost ~]# isula exec -it 01e82fcf97d4 bash 
[root@localhost ~]# cat /sys/fs/cgroup/files/files.limit 
1024 

```

Информация в приведенном примере указывает на то, что установлено ограничение количества дескрипторов файлов в контейнере.