# Приложение

- [Приложение](#appendix)
  - [Параметры командной строки](#command-line-parameters)
  - [Параметры CNI](#cni-parameters)

## Параметры командной строки

**Табл. 1** Параметры команды **login**

| **Команда** | **Параметр**     | **Описание**                                                |
| ----------- | ---------------- | ----------------------------------------------------------- |
| **login**   | -H, --host       | Путь к файлу сокета iSulad.                                 |
|             | -p, --password   | Пароль для входа в регистр.                                 |
|             | --password-stdin | Пароль для получения регистра из стандартного ввода данных. |
|             | -u, --username   | Имя пользователя для входа в регистр.                       |

**Табл. 2** Параметры команды **logout**

| **Команда** | **Параметр** | **Описание**                |
| ----------- | ------------ | --------------------------- |
| **logout**  | -H, --host   | Путь к файлу сокета iSulad. |

**Табл. 3** Параметры команды **pull**

| **Команда** | **Параметр** | **Описание**                |
| ----------- | ------------ | --------------------------- |
| **pull**    | -H, --host   | Путь к файлу сокета iSulad. |

**Табл. 4** Параметры команды **rmi**

| **Команда** | **Параметр** | **Описание**                    |
| ----------- | ------------ | ------------------------------- |
| **rmi**     | -H, --host   | Путь к файлу сокета iSulad.     |
|             | -f, --force  | Принудительное удаление образа. |

**Табл.** **5** Параметры команды **load**

| **Команда** | **Параметр**                              | **Описание**                                                 |
| ----------- | ----------------------------------------- | ------------------------------------------------------------ |
| **load**    | -H, --host (поддерживается  только iSula) | Путь к файлу сокета iSulad.                                  |
|             | -i, --input                               | Место, куда импортируется образ. Если образ имеет тип docker, значением является путь к пакету образа. Если образ встроенного типа, значением является путь к файлу manifest образа. |
|             | --tag                                     | Использует имя образа, указанное тегом, вместо имени образа по умолчанию. Этот параметр поддерживается, когда тип имеет значение **docker**. |
|             | -t, --type                                | Тип образа. Значением может быть **embedded** (встроенный) или **docker** (значение по умолчанию). |

**Табл. 6** Параметры команды **images**

| **Команда** | **Параметр** | **Описание**                  |
| ----------- | ------------ | ----------------------------- |
| **images**  | -H, --host   | Путь к файлу сокета iSulad.   |
|             | -q, --quit   | Отображает только имя образа. |

**Табл. 7** Параметры команды **inspect**

| **Команда** | Параметр     | **Описание**                                                 |
| ----------- | ------------ | ------------------------------------------------------------ |
| **inspect** | -H, --host   | Путь к файлу сокета iSulad.                                  |
|             | -f, --format | Выводы с использованием шаблона.                             |
|             | -t, --time   | Интервал времени ожидания в секундах. В случае невыполнения команды **inspect**, которая запрашивает информацию о контейнере, в течение указанного периода времени, система прекращает ожидание и немедленно сообщает об ошибке. Значение по умолчанию — **120s**. Если значение меньше или равно 0, команда **inspect** продолжает ожидание, пока не будет получена информация о контейнере. |

## Параметры CNI

**Табл. 1** Параметры одной сети CNI

| Параметр         | Тип                    | Обязательный | Описание                                                     |
| ---------------- | ---------------------- | ------------ | ------------------------------------------------------------ |
| cniVersion       | string                 | Да           | Версия CNI. Поддерживаются только версии 0.3.0 и 0.3.1.      |
| name             | string                 | Да           | Имя сети, которое задается пользователем и должно быть уникальным. |
| type             | string                 | Да           | Тип сети. Поддерживаются следующие типы:  <br />underlay_ipvlan  <br />overlay_l2  <br />underlay_l2  <br />vpc-router  <br />dpdk-direct  <br />phy-direct |
| ipmasp           | bool                   | Нет          | Настройка динамической подстановки IP-адреса (masquerade).   |
| ipam             | structure              | Нет          | Для получения подробной информации см. определение параметра IPAM. |
| ipam.type        | string                 | Нет          | Тип IPAM. Поддерживаются следующие типы:  <br />(1) Для типов сетей **underlay_l2**, **overlay_l2** и **vpc-router** поддерживается только значение по умолчанию **distributed_l2**.  <br />(2) Для типа сети **underlay_ipvlan** значением по умолчанию является **distributed_l2**. В сценарии CCN поддерживаются только значения **null** и **fixed**. В базовых сценариях CCE и FST 5G поддерживаются только значения **null** и **distributed_l2**.  <br />(3) Для типов сети **phy-direct** и **dpdk-direct** значением по умолчанию является **l2**, а значения **null** и **distributed_l2** опциональны. В сценариях FST 5G поддерживаются только значения **null** и **distributed_l2**.  <br />Описание:  <br />Если значение не входит в диапазон (например, host-local), Canal автоматически устанавливает значение по умолчанию, и ошибки не возвращаются.<br />**null**: Canal не используется для управления IP-адресами.  <br />**fixed**: фиксированный IP-адрес, который используется в сценарии CCN.  <br />**l2**: это значение не используется ни в одном сценарии.  <br />**distributed_l2**: для управления IP-адресами используется небольшая распределенная подсеть. |
| ipam.subnet      | string                 | Нет          | Информация подсети. Canal поддерживает маску подсети в диапазоне от 8 до 29. IP-адрес не может быть адресом многоадресной передачи (например, **224.0.0.0/4**), зарезервированным адресом (**240.0.0.0/4**), адресом local link, предназначенным для коммуникаций в пределах одного сегмента местной сети (**169.254.0.0/16**) или адресом local loop внутренней петли локального компьютера (**127.0.0.0/8**). |
| ipam.gateway     | string                 | Нет          | IP-адрес шлюза.                                              |
| ipam.range-start | string                 | Нет          | Доступный начальный IP-адрес.                                |
| ipam.range-end   | string                 | Нет          | Доступный конечный IP-адрес.                                 |
| ipam.routes      | structure              | Нет          | Список элементов подсети. Каждый элемент представляет собой словарь маршрута. Для получения подробной информации см. определение маршрута. |
| ipam.routes.dst  | string                 | Нет          | Сеть назначения.                                             |
| ipam.routes.gw   | string                 | Нет          | Адрес шлюза.                                                 |
| dns              | structure              | Нет          | Содержит некоторые специальные значения DNS.                 |
| dns.nameservers  | []string               | Нет          | Сервер для преобразования доменных имен.                     |
| dns.domain       | string                 | Нет          | Домен                                                        |
| dns.search       | []string               | Нет          | Поиск                                                        |
| dns.options      | []string               | Нет          | Параметры для выбора                                         |
| multi_entry      | int                    | Нет          | Количество IP-адресов, требующихся виртуальной карте vNIC. Диапазон принимаемых значений — от 0 до 16. Для физического сквозного доступа к одной карте NIC можно применить максимум 128 IP-адресов. |
| backup_mode      | bool                   | Нет          | Режим активный-резервный, который используется только для типов сетей **phy-direct** и **dpdk-direct**. |
| vlanID           | int                    | Нет          | Диапазон принимаемых значений — от 0 до 4095. Идентификатор VLAN можно указать через PaaS. |
| vlan_inside      | bool                   | Нет          | Значение **true** означает, что функция VLAN реализуется внутри узла, а значение **false** означает, что функция VLAN реализуется не внешнем уровне. |
| vxlanID          | int                    | Нет          | Диапазон принимаемых значений — от 0 до 16777215. Идентификатор VLAN можно указать через PaaS. |
| vxlan_inside     | bool                   | Нет          | Значение **true** означает, что функция VLAN реализуется внутри узла, а значение **false** означает, что функция VLAN реализуется не внешнем уровне. |
| action           | string                 | Нет          | Этот параметр может использоваться только со специальным идентификатором контейнера **000000000000**.  <br />**Create**: создание сети.  <br />**Delete**: удаление сети. |
| args             | map[string]interface{} | Нет          | Тип пары ключ-значение.                                      |
| runtimeConfig    | structure              | Нет          | --                                                           |
| capabilities     | structure              | Нет          | --                                                           |

**Табл. 2** Параметры CNI args

| **Параметр**         | **Тип**             | **Обязательный** | **Описание**                                                 |
| -------------------- | ------------------- | ---------------- | ------------------------------------------------------------ |
| K8S_POD_NAME         | string              | Нет              | Этот параметр устанавливается, если запрашивается фиксированный IP-адрес (**runtimeConfig.ican_caps.fixed_ip** имеет значение **true**). |
| K8S_POD_NAMESPACE    | string              | Нет              | Этот параметр устанавливается, если запрашивается фиксированный IP-адрес (**runtimeConfig.ican_caps.fixed_ip** имеет значение **true**). |
| SECURE_CONTAINER     | string              | Нет              | Флаг безопасного контейнера.                                 |
| multi_port           | int                 | Нет              | Диапазон принимаемых значений — от 1 до 8. Значение по умолчанию — **1**. Количество NIC со сквозным доступом. Поддерживаются только сети типов phy-direct и dpdk-direct. |
| phy-direct           | string              | Нет              | Карта NIC, которую необходимо подключить при создании контейнерной сети SR-IOV. |
| dpdk-direct          | string              | Нет              | Карта NIC, которую необходимо подключить при создании контейнерной сети DPDK со сквозным доступом. |
| tenant_id            | string              | Нет              | Идентификатор арендатора.  **Поддерживаются только сети типа vpc-router.** |
| vpc_id               | string              | Нет              | Идентификатор VPC.  **Поддерживаются только сети типа vpc-router.** |
| secret_name          | string              | Нет              | Имя объекта AK/SK на K8S APIServer.  **Поддерживаются только сети типа vpc-router.** Для получения подробной информации см. конфигурацию логических сетей VPC-Router. |
| IP                   | string              | Нет              | IP-адрес, указанный пользователем, в формате 192.168.0.10.   |
| K8S_POD_NETWORK_ARGS | string              | Нет              | IP-адрес в формате 192.168.0.10. Если значения обоих параметров **IP** и **K8S_POD_NETWORK_ARGS** в args не являются пустыми, преимущество имеет значение **K8S_POD_NETWORK_ARGS**. |
| INSTANCE_NAME        | string              | Нет              | INSTANCE ID. См. фиксированные IP-адреса, которые поддерживают контейнеры. |
| dist_gateway_disable | bool                | Нет              | Значение **true** означает, что шлюз не создан, а значение **false** указывает на созданный шлюз. |
| phynet               | string или []string | Нет              | Имя добавленной физической плоскости. Имя физической плоскости предопределено и соответствует имени в системе SNC. Если указаны имена двух плоскостей, эти плоскости существуют в режиме активный-резервный. Пример: phy_net1 или ["phy_net2", "phy_net3"] |
| endpoint_policies    | struct              | Нет              | "endpoint_policies":  [  {  "Type":  "",  "ExceptionList":  [  ""  ],  "NeedEncap":  true,  "DestinationPrefix":  ""  }  ] |
| port_map             | struct              | Нет              | В сети NAT порты контейнеров могут быть объявлены портам хостов.  "port_map":  [  {  "local_port":  number,  "host_port":  number,  "protocol":  [string...]  }...  ] |



**Табл. 3** Параметры нескольких сетей CNI

| **Параметр** | **Тип** | **Обязательный** | Описание                                                     |
| ------------ | ------- | ---------------- | ------------------------------------------------------------ |
| cniVersion   | string  | Да               | Версия CNI. Поддерживаются только версии 0.3.0 и 0.3.1.      |
| name         | string  | Да               | Имя сети, которое задается пользователем и должно быть уникальным. |
| plugins      | struct  | Да               | Для получения подробной информации см. [Параметры одной сети CNI](#en-us_topic_0184347952_table42502333591). |



